import{u as h,r as g,a as f,j as e,B as o,b,I as u,N as c,F as j,h as y,i as v,k as w}from"./index-06fad6d6.js";function N(){const{state:s,dispatch:a}=h(),[i,r]=g.useState({username:s.admin.username,email:s.admin.email,profilePic:null});function d(l){l.target.files&&l.target.files.length>0&&r({...i,profilePic:l.target.files[0]})}const x=l=>r(m=>({...m,[l.target.id]:l.target.value}));async function p(){const l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2ODA2MjY4Mjh9.NrIj1b2bbbVG0sNw58xYsvJeGhLa7dIIrSJQeGDcS_c",m="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2ODA2MjY2MDN9.4TR0ukDskZMU_t6T6Fjv3umFkF5vkKx5Kqv9prryv4Y";if(i.profilePic){const n=new FormData;n.append("image",i.profilePic),n.append("email",i.email),n.append("username",i.username),fetch("https://taskhub-api.onrender.com/api/editaccount",{method:"POST",body:n,headers:{"x-api-key":m,Authorization:l}}).then(t=>t.json()).then(t=>{"error"in t&&c("Fetch Error",t.error),console.log(t)}).catch(t=>c("Error While Updating Account",t.message)),j("api/admin","GET").then(t=>{"error"in t?c("Fetch Error",t.error):a({type:"admin",payload:{admin:t}})}).catch(t=>c("Error While Updating Account",t.message))}a({type:"editAccount",payload:{editAccount:!1}})}return f.createPortal(e.jsx("section",{className:`${s.theme}`,children:e.jsxs("form",{className:"w-4/5 md:w-3/5 lg:w-1/2 h-3/5 absolute z-20 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-slate-100 dark:bg-slate-600 rounded-3xl p-3 shadow-2xl",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("p",{className:" dark:text-white font-bold text-3xl tracking-wider",children:"Edit Profile"}),e.jsx(o,{Value:b,bg:"bg-red-500",more:"text-white text-2xl md:text-3xl p-1 rounded-xl absolute top-0 right-1 md:right-2",onClick:()=>a({type:"editAccount",payload:{editAccount:!1}}),modal:!0})]}),e.jsxs("div",{className:"flex flex-col w-11/12 mx-auto mt-5 gap-4",children:[e.jsx("input",{type:"file",id:"profilePic",accept:"Image/*",className:"rounded-xl h-12 md:h-10 text-gray-600 dark:text-white text-xl font-semibold dark:focus:outline-slate-500 hover:border-gray-500 px-2",onChange:d}),e.jsx(u,{type:"text",id:"username",placeholder:"username",value:i.username,onChange:x}),e.jsx(u,{type:"email",id:"email",placeholder:"email",value:i.email,onChange:x})]}),e.jsx("div",{className:"w-full flex items-center mt-6",children:e.jsx(o,{Value:"Submit",bg:"bg-blue-500 hover:bg-blue-400",more:"w-3/4 mx-auto text-white text-2xl md:text-3xl font-bold p-1 rounded-xl tracking-wider ",onClick:p,modal:!0})})]})}),document.getElementById("modal"))}function I(){const s=y(),{state:a,dispatch:i}=h(),r=btoa(String.fromCharCode(...new Uint8Array(a.admin.image.data.data))),d=`data:${a.admin.image.contentType};base64,${r}`;return e.jsxs("section",{className:"relative",children:[e.jsx("div",{className:"absolute top-0 right-0",children:e.jsx(o,{Value:v,bg:" bg-slate-300 hover:bg-blue-500 hover:text-white dark:hover:bg-slate-500 dark:bg-slate-600 ",more:"p-2 text-2xl",onClick:()=>s("/settings")})}),e.jsx("h1",{className:"w-full text-center text-2xl lg:text-3xl font-bold tracking-widest",children:"Account"}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-6",children:[e.jsx("div",{className:"w-1/2 mt-6 flex items-center justify-center",children:e.jsx("img",{src:d,alt:"profilePic"})}),e.jsxs("div",{className:"text-center md:w-2/3 flex flex-col gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsx("p",{className:"text-2xl font-bold hover:bg",children:a.admin.username})}),e.jsx("div",{className:"w-full",children:e.jsx("p",{className:"text-lg font-semibold tracking-wide",children:a.admin.email})})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx(o,{Value:w,bg:"bg-blue-500 text-white dark:bg-slate-500 hover:bg-blue-600 dark:hover:bg-slate-600",more:"text-2xl p-2",onClick:()=>i({type:"editAccount",payload:{editAccount:!0}})})})]}),a.editAccount&&e.jsx(N,{})]})}export{I as default};
